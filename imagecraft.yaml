name: ubuntu-server-amd64
version: "24.04.20241217"
base: bare
build-base: ubuntu@24.04
platforms:
  amd64:

parts:
  rootfs:
    plugin: mmdebstrap
  bootloader:
    plugin: bootloader
    source: https://github.com/snapcore/pc-gadget.git
    source-branch: classic
    organize:
      shimx64.efi: (efi)/boot/EFI/BOOT/BOOTX64.EFI
      fbx64.efi: (efi)/boot/EFI/BOOT/fbx64.efi
      mmx64.efi: (efi)/boot/EFI/BOOT/mmx64.efi
      BOOTX64.CSV: (efi)/boot/EFI/ubuntu/BOOTX64.CSV
      grub.cfg: (efi)/boot/EFI/ubuntu/grub.cfg
      grubx64.efi: (efi)/boot/EFI/ubuntu/grubx64.efi
      pc-boot.img: (mbr)/pc-boot.img
      pc-core.img: (bios)/pc-core.img

volumes:
  pc:
    bootloader: grub
    schema: gpt
    structure:
      - name: mbr
        type: EBD0A0A2-B9E5-4433-87C0-68B6B72699C7
        size: 440
        role: "mbr"
        content:
          - source: (mbr)/pc-boot.img
            target: /
      - name: boot
        type: 21686148-6449-6E6F-744E-656564454649
        size: 1000000
        role: system-boot
        offset: 1000000
        content:
          - source: (bios)/pc-core.img
            target: /
      - name: EFI
        type: C12A7328-F81F-11D2-BA4B-00A0C93EC93B
        filesystem: vfat
        filesystem-label: system-boot
        size: 256000000
        role: system-boot
        content:
          - source: (efi)/
            target: /
      - name: rootfs
        type: 0FC63DAF-8483-4772-8E79-3D69D8477DE4
        filesystem: ext4
        filesystem-label: writable
        role: system-data
        size: 3000000000
        content:
          - source: (default)
            target: /
